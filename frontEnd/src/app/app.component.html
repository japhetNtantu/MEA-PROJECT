<header class="flex flex-wrap items-center justify-between bg-indigo-600 text-white shadow px-5 py-3">
  <div class="flex items-center gap-5 flex-wrap">
    <div class="flex items-center">
      <h1 class="m-0 text-2xl font-semibold">{{ title }}</h1>
    </div>
    <div *ngIf="currentUser" class="bg-white/10 rounded px-3 py-1 text-base">
      <span>Bonjour, <strong class="font-bold">{{ currentUser.username }}</strong> !</span>
    </div>
  </div>
  <nav class="flex items-center gap-4 flex-wrap relative">
    <a routerLink="/public/home" routerLinkActive="active"
       class="nav-link transition hover:bg-white/20 rounded px-3 py-2 font-medium">Accueil</a>
    <a routerLink="/public/cart" routerLinkActive="active"
       class="nav-link relative transition hover:bg-white/20 rounded px-3 py-2 font-medium"
       (click)="toggleCartDropdown($event)">
      Panier
      <span *ngIf="cartItemCount > 0"
            class="absolute -top-2 -right-2 bg-orange-600 text-white rounded-full px-2 py-0.5 text-xs font-bold min-w-[1.25rem] text-center shadow">
        {{ cartItemCount }}
      </span>
    </a>
    <ng-container *ngIf="!currentUser">
      <a routerLink="/auth/login" routerLinkActive="active"
         class="nav-link transition hover:bg-white/20 rounded px-3 py-2 font-medium">Connexion</a>
      <a routerLink="/auth/register" routerLinkActive="active"
         class="nav-link transition hover:bg-white/20 rounded px-3 py-2 font-medium">Inscription</a>
    </ng-container>
    <ng-container *ngIf="currentUser">
      <a *ngIf="currentUser.is_superuser" routerLink="/admin" routerLinkActive="active"
         class="nav-link transition hover:bg-white/20 rounded px-3 py-2 font-medium">Admin Dashboard</a>
      <button (click)="logout()"
              class="nav-link bg-red-600 hover:bg-red-700 rounded px-3 py-2 font-medium transition border-none cursor-pointer">
        DÃ©connexion
      </button>
    </ng-container>
    <app-cart-dropdown *ngIf="showCartDropdown" (closeDropdown)="onCloseCartDropdown()"></app-cart-dropdown>
  </nav>
</header>

<main class="max-h-[calc(100vh-120px)] overflow-scroll bg-gray-50 text-gray-800">
  <router-outlet></router-outlet>
</main>

<div *ngIf="showOrderSuccessSnapshot"
     class="fixed left-1/2 top-20 -translate-x-1/2 bg-green-600 text-white px-8 py-4 rounded-lg shadow-lg z-50 text-lg animate-fadeInOut">
  <p>ðŸŽ‰ Commande passÃ©e avec succÃ¨s !</p>
</div>

<footer class="text-center py-4 bg-gray-800 text-white text-sm">
  <p>&copy; 2025 {{ title }}</p>
</footer>
